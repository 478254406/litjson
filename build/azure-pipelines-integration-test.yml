jobs:
  - ${{ each image in parameters.images }}:
    - ${{ each sdkVersion in parameters.sdkVersions }}:
      - job:
        displayName: ${{ format('OS:{0} SDK:{1}', image, sdkVersion) }}
        pool:
            vmImage: ${{ image }}
        steps:
          - task: UseDotNet@2
            env:
              DOTNET_SKIP_FIRST_TIME_EXPERIENCE: 1
            inputs:
                packageType: 'sdk'
                version: '${{ sdkVersion }}'

          - task: Bash@3
            env:
              DOTNET_SKIP_FIRST_TIME_EXPERIENCE: 1
            inputs:
              targetType: 'inline'
              script: |
                rm global.json
                dotnet new console
                dotnet add package LitJson
                dotnet build
